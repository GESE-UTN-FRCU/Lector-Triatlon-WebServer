<!DOCTYPE html>
<html lang="es">
  <head>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
    <link type="text/css" rel="stylesheet" href="css/style.css"  media="screen,projection"/>
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  </head>
  <body>
    <nav style="background-color: #00979d">
      <div class="nav-wrapper">
        <a href="#" class="brand-logo"><img src="/img/arduinologo.png" height="50px;"></a>
        <ul id="nav-mobile" class="right hide-on-med-and-down">
          <li>
            <a class="btn modal-trigger" href="#modalCarrera">Agregar Carrera</a>
          </li>
          <li>
            <a class="btn modal-trigger" href="#modalCorredor">Agregar Corredor</a>
          </li>
          <li>
            <a class="btn modal-trigger" href="#modalCategoria">Agregar Categoría</a>
          </li>
          <li>
            <a class="btn modal-trigger" href="#modalInscripcion">Inscripción</a>
          </li>
        </ul>
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col 3 m3">
          <div class="card-panel center">
            <div  class="center">
              <output id="display-area">00:00:00.000</output>
            </div>
            <hr>
            <a class="btn-floating btn-large waves-effect waves-light green" onClick="start()"> <i class="material-icons">play_arrow</i></a>
            <a class="btn-floating btn-large waves-effect waves-light red" onClick="stop()">
              <i class="material-icons">stop</i>
            </a>
            <a class="btn-floating btn-large waves-effect waves-light blue" onClick="reset()">
              <i class="material-icons">replay</i>
            </a>
          </div>
        </div>
        <div class="col s9 m9">
          <div class="card-panel">

            <div class="row">
              <div class="col s12">
                <div class="card-panel">
                  <ul class="tabs">
                    <li class="tab col s3"><a class="active" href="#test1">Todos</a></li>
                    <li class="tab col s3"><a href="#test2">Masculino +20</a></li>
                    <li class="tab col s3"><a href="#test3">Masculino +23</a></li>
                    <li class="tab col s3"><a href="#test4">Masculino +29</a></li>
                  </ul>
              </div>
              </div>
            </div>

            <div class="card-panel">
              <table class="highlight centered">
                <thead>
                  <tr>
                    <th>Puesto</th>
                    <th>Tiempo</th>
                    <th>Corredor</th>
                  </tr>
                </thead>
                <tbody id="lecturas">
                </tbody>
              </table>
          </div>
          </div>
        </div>
      </div>
      
      <!-- Modal agregar carrera -->
      <div id="modalCarrera" class="modal" style="width: 75% !important ; height: 75% !important ;">
        <div class="modal-content">
          <h4>Agregar carrera</h4>
          <div class="row">
            <div class="input-field col s6">
              <input id="name" type="text" class="validate">
              <label class="active" for="name">Nombre</label>
            </div>
            <div class="input-field col s6">
              <input id="date" type="text" class="datepicker">
              <label class="active" for="date">Fecha</label>
            </div>
            <div class="input-field col s6">
              <select>
                <option value="1">Damas +15</option>
                <option value="2">Damas +21</option>
                <option value="3">Damas +25</option>
                <option value="3">Damas +30</option>
              </select>
              <label>Categorías</label>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <a href="" class="waves-effect waves-green btn-flat">Agregar</a>
          <a href="" class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
        </div>
      </div>

      <!-- Modal inscribir corredor a carrera -->

      <div id="modalInscripcion" class="modal" style="width: 75% !important ; height: 75% !important ;">
        <div class="modal-content">
          <h4>Inscripción</h4>
          <div class="row">
            <div class="input-field col s6">
              <select>
                <option value="1">Sabado 20 abril</option>
                <option value="2">Sabado 2 mayo</option>
                <option value="3">Sabado 9 junio</option>
                <option value="3">Sabado 20 septiembre</option>
              </select>
              <label>Carrera</label>
            </div>
            <div class="input-field col s6">
              <select multiple>
                <option value="1">Carlos</option>
                <option value="2">Pepe</option>
                <option value="3">Martin</option>
                <option value="3">Julia</option>
              </select>
              <label>Corredor</label>
            </div>
            <div class="input-field col s6">
              <select>
                <option value="1">Lector 1</option>
                <option value="2">Lector 1</option>
                <option value="3">Lector 3</option>
              </select>
              <label>Lector</label>
            </div>

            <button class="btn waves-effect waves-light" type="submit" name="action">Ultima lectura
              <i class="material-icons right">send</i>
            </button>
        
          </div>
        </div>
        <div class="modal-footer">
          <a href="" class="waves-effect waves-green btn-flat">Agregar</a>
          <a href="" class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
        </div>
      </div>

      <!-- Modal agregar corredor -->

      <div id="modalCorredor" class="modal" style="width: 75% !important ; height: 75% !important ;">
        <div class="modal-content">
          <h4>Agregar Corredor</h4>
          
          <div class="row">
            <div class="input-field col s6">
              <input id="name" type="text" class="validate">
              <label class="active" for="name">Nombre</label>
            </div>
            <div class="input-field col s6">
              <input id="surname" type="text" class="validate">
              <label class="active" for="surname">Apellido</label>
            </div>
            <div class="input-field col s6">
              <input id="dni" type="text" class="validate">
              <label class="active" for="dni">DNI</label>
            </div>
            <div class="input-field col s6">
              <input id="date" type="text" class="datepicker">
              <label class="active" for="date">Fecha de nacimiento</label>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <a href="" class="waves-effect waves-green btn-flat">Agregar</a>
          <a href="" class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
        </div>
      </div>

      <!-- Modal agregar categoria -->

      <div id="modalCategoria" class="modal" style="width: 75% !important ; height: 75% !important ;">
        <div class="modal-content">
          <h4>Agregar Categoria</h4>
          <div class="row">
            <div class="input-field col s6">
              <input id="name" type="text" class="validate">
              <label class="active" for="name">Nombre</label>
            </div>
            <div class="input-field col s6">
              <input id="surname" type="text" class="validate">
              <label class="active" for="surname">Apellido</label>
            </div>
            <div class="input-field col s6">
              <input id="min" type="text" class="validate">
              <label class="active" for="min">Edad Minima</label>
            </div>
            <div class="input-field col s6">
              <input id="max" type="text" class="validate">
              <label class="active" for="max">Edad Maxima</label>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <a href="" class="waves-effect waves-green btn-flat">Agregar</a>
          <a href="" class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
        </div>
      </div>

	<!--Import jQuery before materialize.js-->
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="js/materialize.min.js"></script>
	<script type="text/javascript" src="js/clock.js"></script>
  <script type="text/javascript" src="js/datepicker.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>

	<script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function() {
      var elems = document.querySelectorAll('.modal');
      var instances = M.Modal.init();
      });
      // Or with jQuery
      $(document).ready(function(){
      $('.modal').modal();
      });
      document.addEventListener('DOMContentLoaded', function() {
      var elems = document.querySelectorAll('select');
      var instances = M.FormSelect.init();
      });
      // Or with jQuery
      $(document).ready(function(){
      $('select').formSelect();
      });
    </script>

	<script>
	  // $(function () {
	  //   var socket = io();
	  //   socket.on('lectura', function(msg){
	  //     $('#messages').append($('<li>').text(msg));
	  //   });
	  // });

      $(function () {
      var socket = io.connect();
      var $lecturas = $('#lecturas');
      
      socket.on('connected', function (data) {
        socket.emit('listoData', {});
      });

      socket.on('lectura', function (data) {
          var lecturas = '';
          for (i = 0; i < data.length; i++) {
              lecturas += data[i]
          if(lecturas){
          $lecturas.append('<tr><td>' + lecturas[0] + '</td><td>' + lecturas[1] + '</td><td>' + lecturas[2] + '</td></tr>');
          }
          else{
              $lecturas.append('No ha terminado ningún corredor.');
          }
            lecturas = '';
          }

      });
  });
	</script>

  <script type="text/javascript">
      var instance = M.Tabs.init();

      // Or with jQuery

      $(document).ready(function(){
        $('.tabs').tabs();
      });
  </script>
</body>
</html>